function MSSelect(e){this.params=e||{},this.onchange=this.params.onchange||null,this.addCSS()}MSSelect.BASEPATH="/public/msweb-um",MSSelect.CLASSLIST={select:"msweb-select",option:"msweb-select-option",title:"msweb-select-title",down:"msweb-select-down",optsContainer:"msweb-select-opts-container",selectedCont:"msweb-select-selected-cont"},MSSelect.prototype.init=function(){for(var e=document.querySelectorAll("."+MSSelect.CLASSLIST.select),t=0;t<e.length;t++){var s={},n=e[t];s.options=n.options,s.selected=n.selectedOptions[0],s.select=e[t];n=e[t].parentElement;e[t].style.display="none",this.create(s,n)}},MSSelect.prototype.addCSS=function(){var e,t;MSSelect.cssRendered||((e=document.createElement("link")).rel="stylesheet",t=Math.floor(new Date/1e3),e.href=MSSelect.BASEPATH+"/msweb-select.css?v="+t,(document.head||document.getElementsByTagName("head")[0]).appendChild(e),MSSelect.cssRendered=!0)},MSSelect.prototype.create=function(n,e){var l=document.createElement("div");l.className=MSSelect.CLASSLIST.select,e=e||n.select.parentElement,n.select&&(n.select.style.display="none"),e.appendChild(l),n.classes&&("object"!=typeof n.classes&&(n.classes=n.classes.split(" ")),n.classes.forEach(function(e){l.classList.add(e)}));var t=n.title||"Выберите из списка",e=document.createElement("div");e.className=MSSelect.CLASSLIST.title,e.innerText=t,l.append(e);e=document.createElement("div");e.className=MSSelect.CLASSLIST.down,l.append(e);var c=document.createElement("div");c.className=MSSelect.CLASSLIST.selectedCont,l.append(c),c.innerText=n.options[0].innerText;var a=document.createElement("div");a.className=MSSelect.CLASSLIST.optsContainer,a.style.display="none",l.appendChild(a);function s(e,t){var s=a.parentElement;if(s!=e.target&&s!=e.target.parentElement&&s!=e.target.parentElement.parentElement)return a.style.display="none";!t&&(e.target.classList.contains(MSSelect.CLASSLIST.down)||e.target.classList.contains(MSSelect.CLASSLIST.title)||e.target.classList.contains(MSSelect.CLASSLIST.selectedCont)||e.target.classList.contains(MSSelect.CLASSLIST.select))?a.style.display?a.style.display="":a.style.display="none":e.target.classList.contains(MSSelect.CLASSLIST.option)?(n.select&&(n.select.value=e.target.getAttribute("value")),c.innerText=e.target.innerText,n.onchange&&n.onchange("",c.innerText),a.style.display="none",S.setState(l,"success")):a.style.display="none"}var S=this;document.addEventListener("click",function(e){s(e)}),document.addEventListener("mouseup",function(e){s(e,!0)});for(var o=0,i=n.options.length;o<i;o++){var r=n.options[o],d=document.createElement("div");d.setAttribute("value",r.value),d.className=MSSelect.CLASSLIST.option,d.innerText=r.innerText,a.append(d)}l.setState=this.setState.bind(l)},MSSelect.prototype.setState=function(e,t){e.classList.remove("wrong"),e.classList.remove("success"),e.classList.add(t)};
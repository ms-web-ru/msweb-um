function MSInputs(e){this.params=e||{},this.types=["text","email","number"],this.onchange=this.params.onchange||null,this.beforeCallbackTimeout=!1,this.init()}MSInputs.CLASSLIST={placeholder:"ms-inputs-placeholder"},MSInputs.prototype.init=function(){this.addCSS();for(var e=document.querySelectorAll(".msweb-input"),t=0;t<e.length;t++)this.renderInput(e[t])},MSInputs.prototype.addCSS=function(){var e,t;MSInputs.cssRendered||(e=".msweb-input-area {border: 1px solid silver;min-height: 25px;border-radius: 3px;width: 50px;margin: auto;display: block;line-height: 25px;font-size: 14px;background:#fff;padding: 0px 5px 0px 5px;box-sizing:border-box;}.msweb-input-area.wrong {border: 2px solid red;}.msweb-inputs-minus {width: 20px;height: 20px;border: 1px solid silver;border-radius: 20px;text-align: center;cursor: pointer;font-size: 30px;line-height: 13px;background: #e1ffbe;margin: auto;}.msweb-inputs-plus {width: 20px;height: 20px;border: 1px solid silver;border-radius: 20px;text-align: center;cursor: pointer;font-size: 22px;line-height: 17px;background: #e1ffbe;margin: auto;}.msweb-inputs-plus:hover, .msweb-inputs-minus:hover {background: #cae6a9;}table.msweb-inputs-controls-table {width:100%;}.msweb-inputs-minus:active, .msweb-inputs-plus:active {border-width: 2px;} .msweb-inputs-plus, .msweb-inputs-minus  {-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.msweb-input-area.disabled {color: #5d5d5d;cursor: not-allowed;}",(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),MSInputs.cssRendered=!0)},MSInputs.prototype.renderInput=function(i){var t,e,n,s,a,r,o,u;i.isrendered||(u=i.getAttribute("controls"),r=i.getAttribute("defaulvalidator"),o=i.getAttribute("type"),this.types.includes(o)||(o="text"),t="function"==typeof(t=i.getAttribute("validator"))&&t||this.params.validator,e=!(e=i.getAttribute("editable"))||"false"!=e,n=i.getAttribute("value"),(s=document.createElement("div")).parent_=i,s.addEventListener("paste",function(e){e.preventDefault()}),s.addEventListener("keydown",function(e){13===e.keyCode&&e.preventDefault()}),s.className="msweb-input-area",this.params.classes&&("string"==typeof this.params.classes&&(this.params.classes=this.params.classes.split(" ")),this.params.classes.forEach(function(e){s.classList.add(e)})),"number"==o?(s.innerHTML=n||1,s.style.textAlign="center"):n&&(s.innerHTML=n),e&&s.setAttribute("contenteditable",!0),t?(a=this.params.validateOnFocusOut?"focusout":"keyup",s.addEventListener(a,function(e){t(s.parentElement.getValue())?this.setState(s,"success"):this.setState(s,"wrong")}.bind(this))):(r&&("number"==o||"email"==o)||!r&&"number"==o)&&(this.params.validateOnFocusOut?s.addEventListener("focusout",function(e){this.validateNumber.bind(this),this.validateMinMax(e,!0)}.bind(this)):(s.addEventListener("keydown",this.validateNumber.bind(this)),s.addEventListener("keyup",this.validateMinMax.bind(this)),s.addEventListener("focusout",function(e){this.validateMinMax(e,!0)}.bind(this)))),this.params.useMSabc&&s.addEventListener("focusout",function(e){this.setValue(s.parentElement,msweb.abc(this.getValue(s.parentElement)))}.bind(this)),a=this.getControlsWrapper(i,u),"number"==o&&u&&((r=document.createElement("div")).className="msweb-inputs-minus",r.innerHTML="-",r.addEventListener("click",function(e){this.onMinus(s);var t,n=this;this.beforeCallbackTimeout&&(this.onchange&&"function"==typeof this.onchange||s.onchange)&&(t=setInterval(function(){n.beforeCallbackTimeout||(n.onchange(i),s.onchange&&s.onchange(i),clearInterval(t))},60))}.bind(this)),this.createControlsTd(r,a,"33.33333%",u)),this.createControlsTd(s,a,u?"33.33333%":"100%",u),"number"==o&&u&&((o=document.createElement("div")).className="msweb-inputs-plus",o.innerHTML="+",o.addEventListener("click",function(e){var t,n;this.onPlus(s),this.beforeCallbackTimeout&&(this.onchange&&"function"==typeof this.onchange||s.onchange)&&(t=this,n=setInterval(function(){t.beforeCallbackTimeout||(t.onchange(i),s.onchange&&s.onchange(i),clearInterval(n))},60))}.bind(this)),this.createControlsTd(o,a,"33.33333%",u)),(u=(u=i.getAttribute("onchange"))&&this.functionExists(u,i))&&(s.oninput=u.bind(i),s.onchange=u.bind(i),i.removeAttribute("onchange")),i.getValue=this.getValue.bind(i),i.setValue=this.setValue.bind(i),i.setState=this.setState.bind(i),i.isrendered=!0)},MSInputs.prototype.functionExists=function(t,n){try{for(var e,i=!0,s=t.split("."),a=0,r=s.length;a<r;a++)if(0==a){if(!window[s[a]]){i=!1;break}e=window[s[a]]}else{if(!e[s[a]])throw i=!1,new Error;e=e[s[a]]}return!!i&&e}catch(e){return this.consoleError("Undefined function "+t+". Element and stack below:"),n&&console.log(n),console.warn(e),!1}},MSInputs.prototype.validateMinMax=function(e,t){var n=e.target||e,i=n.parent_.getAttribute("min")||this.params.min,s=n.parent_.getAttribute("max")||this.params.max;this.beforeCallbackTimeout=!0,this.validateMinMaxTimeout&&clearTimeout(this.validateMinMaxTimeout),this.validateMinMaxTimeout=setTimeout(function(){i&&+n.innerText.replace(/[^0-9]/g,"")<+i&&(n.innerText=i,msweb.placeCaretAtEnd(n)),s&&+n.innerText.replace(/[^0-9]/g,"")>+s&&(n.innerText=s,msweb.placeCaretAtEnd(n)),this.beforeCallbackTimeout=!1}.bind(this),t?10:1e3)},MSInputs.prototype.onMinus=function(e){var t=parseFloat(e.innerText)||1;e.innerText=--t,this.validateMinMax(e)},MSInputs.prototype.onPlus=function(e){var t=parseFloat(e.innerText)||0;e.innerText=++t,this.validateMinMax(e)},MSInputs.prototype.createControlsTd=function(e,t,n,i){i?((i=document.createElement("td")).style.width=n,i.appendChild(e),t.appendChild(i)):(e.style.width=n,t.appendChild(e))},MSInputs.prototype.getControlsWrapper=function(e,t){var n=e.getAttribute("max-width"),i=e.getAttribute("margin");if(t){t=document.createElement("table");return t.className="msweb-inputs-controls-table",n&&(t.style.maxWidth=n),i&&(t.style.margin=i),e.appendChild(t),t.appendChild(document.createElement("tbody")),t.tBodies[0].appendChild(document.createElement("tr")),t.tBodies[0].children[0]}return n&&(e.style.maxWidth=n),i&&(e.style.margin=i),e},MSInputs.prototype.validateNumber=function(e){48<=e.keyCode&&e.keyCode<=57&&!e.shiftKey||96<=e.keyCode&&e.keyCode<=105||8==e.keyCode||39==e.keyCode||37==e.keyCode||9==e.keyCode||46==e.keyCode||65==e.keyCode&&e.ctrlKey||82==e.keyCode&&e.ctrlKey||e.preventDefault()},MSInputs.prototype.setState=function(e,t){e.classList.remove("wrong"),e.classList.remove("success"),e.classList.add(t)},MSInputs.prototype.getValue=function(e){return(e=(e=e||this).querySelector(".msweb-input-area"))&&e.innerText||""},MSInputs.prototype.consoleError=function(e){var t=["padding: 5px;","background: yellow;","font: 16px Georgia;","color: black;"].join("");e="MSInputs \n"+e,console.log("%c%s",t,e)},MSInputs.prototype.setValue=function(e,t){(e=(e=e||this).querySelector(".msweb-input-area"))&&(e.innerText=t)},MSInputs.prototype.setDisabled=function(e,t){e=e.querySelector(".msweb-input-area");t?(e.removeAttribute("contenteditable"),e.classList.add("disabled")):(e.setAttribute("contenteditable",!0),e.classList.remove("disabled"))},MSInputs.prototype.setDisabled=function(e,t){e=e.querySelector(".msweb-input-area");t?(e.removeAttribute("contenteditable"),e.classList.add("disabled")):(e.setAttribute("contenteditable",!0),e.classList.remove("disabled"))};